#!/usr/bin/env bash
PROJECTS_DIR=~/projects

RESULT=$(find $PROJECTS_DIR -maxdepth 1 -type d | fzf)

if [ "$RESULT" == "" ]; then
  echo "Cancelled"
  exit 0
fi

SESSION_NAME="${RESULT//$PROJECTS_DIR\//}"

#creates session if needed
tmux has-session -t $SESSION_NAME 2>/dev/null
if [ $? != 0 ]; then
  tmux new -d -s $SESSION_NAME -c $RESULT
fi

if [ "$TMUX" == "" ]; then
  tmux a -t $SESSION_NAME
else
  tmux switch -t $SESSION_NAME
fi
